---
description:
globs:
alwaysApply: true
---
## âš ï¸ ä¸­æ–‡ä½¿ç”¨è§„èŒƒ

- æ‰€æœ‰ä»£ç ä¸­ï¼ˆæç¤ºè¯­ã€é»˜è®¤å€¼ã€å­—ç¬¦ä¸²ç­‰ï¼‰ç¦æ­¢ä½¿ç”¨ä¸­æ–‡ï¼Œé™¤éæ˜ç¡®è¦æ±‚
- æ‰€æœ‰æ³¨é‡Šå¿…é¡»ä½¿ç”¨ä¸­æ–‡ï¼Œè§£é‡Šé€»è¾‘ã€å­—æ®µç”¨é€”æˆ–æµç¨‹å«ä¹‰

## ğŸ¯ æ€»ä½“ç›®æ ‡

- é¿å…å‡ºç°é˜»æ–­æ€§é”™è¯¯ï¼Œæå‡ä»£ç å¥å£®æ€§
- è§„èŒƒä»£ç é£æ ¼ï¼Œæé«˜å¯ç»´æŠ¤æ€§
- ä¿è¯å…¼å®¹ Vue2, Vue3, React ç­‰å¤šæ¡†æ¶
- å°½é‡é˜²æ­¢ undefined/null/NaN ç­‰å¼‚å¸¸å¯¼è‡´è¿è¡Œå´©æºƒ

---

## ğŸš« ç¦æ­¢åœ¨æ¨¡æ¿/JSXä¸­ç›´æ¥è°ƒç”¨å‡½æ•°å¯¼è‡´æ€§èƒ½é—®é¢˜

```vue
<!-- âŒ é”™è¯¯ç¤ºä¾‹ï¼Œæ¨¡æ¿æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨å‡½æ•°ï¼Œæ€§èƒ½ä½ä¸”æ˜“æŠ¥é”™ -->
<template>
  <div>{{ getTitle() }}</div>
</template>
<script>
export default {
  methods: {
    getTitle() {
      return this.title.toUpperCase();
    }
  }
}
</script>
```

```vue
<!-- âœ… æ¨èå†™æ³•ï¼Œä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜ç»“æœ -->
<template>
  <div>{{ computedTitle }}</div>
</template>
<script>
export default {
  computed: {
    computedTitle() {
      return this.title.toUpperCase();
    }
  }
}
</script>
```

---

## ğŸ”¥ å­—æ®µéªŒè¯å¿…é¡»å…¨é¢ï¼Œé˜²æ­¢ undefined æŠ¥é”™

```js
export default {
  props: {
    name: {
      type: String,
      required: true,
      default: ''
    },
    age: {
      type: Number,
      default: 0
    }
  }
}
```

---

## ğŸ›¡ å¼‚æ­¥è¯·æ±‚ç»Ÿä¸€åŠ  try/catchï¼Œé˜²æ­¢å´©æºƒ

```js
async fetchData() {
  try {
    const res = await api.getUser();
    this.user = res?.data || {};
  } catch (error) {
    this.$message?.error('Request failed');
  }
}
```

---

## ğŸ’¬ ä»£ç æ³¨é‡Šå¿…é¡»ä¸­æ–‡ç¤ºä¾‹

```js
// è·å–ç”¨æˆ·åˆ—è¡¨æ•°æ®
async function fetchUsers() {
  try {
    const res = await api.getUsers();
    // å¦‚æœæ¥å£è¿”å›ä¸ºç©ºï¼Œé»˜è®¤ç©ºæ•°ç»„
    const list = res?.data || [];
    return list;
  } catch (e) {
    // è¯·æ±‚å¤±è´¥ï¼Œæ‰“å°é”™è¯¯æ—¥å¿—
    console.error('è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥', e);
    return [];
  }
}
```

---

## âš ï¸ é¿å…ä½¿ç”¨ JSON.parse(JSON.stringify(...)) å¯¼è‡´æ·±æ‹·è´å¤±è´¥

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šJSON.stringify æ— æ³•å¤åˆ¶å‡½æ•°ã€undefinedï¼Œä¸”ä¼šæŠ›å‡ºå¾ªç¯å¼•ç”¨é”™è¯¯
const obj = {
  name: 'test',
  fn: () => console.log('hello'),
  a: undefined
};
obj.self = obj; // å¾ªç¯å¼•ç”¨

try {
  const copy = JSON.parse(JSON.stringify(obj)); // æŠ¥é”™ï¼šå¾ªç¯å¼•ç”¨
} catch (e) {
  console.error('æ·±æ‹·è´å¤±è´¥', e);
}
```

```js
// âœ… æ¨èå†™æ³•ï¼šä½¿ç”¨ lodash æ·±æ‹·è´æˆ–æ‰‹å†™é€’å½’
import cloneDeep from 'lodash/cloneDeep';

const copy = cloneDeep(obj);
```

---

## âš ï¸ é˜²æ­¢ JSON.parse(null) å¯¼è‡´å¼‚å¸¸å´©æºƒ

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼Œä¼ å…¥ null ä¼šæŠ¥é”™
const data = null;
try {
  const parsed = JSON.parse(data); // æŠ›å‡ºå¼‚å¸¸ï¼šUnexpected token u in JSON at position 0
} catch (e) {
  console.error('JSON.parse å¤±è´¥', e);
}
```

```js
// âœ… æ¨èå†™æ³•ï¼Œå…ˆåšç±»å‹å’Œç©ºå€¼åˆ¤æ–­
const data = null;
try {
  const parsed = typeof data === 'string' && data ? JSON.parse(data) : {};
} catch (e) {
  console.error('JSON.parse å¤±è´¥', e);
}
```

---

## âš ï¸ é˜²æ­¢ undefined / null / NaN å¯¼è‡´çš„å‰ç«¯é”™è¯¯åŠç¤ºèŒƒ

### å˜é‡è®¿é—®å®‰å…¨

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥è®¿é—®å¯èƒ½æŠ¥é”™
const len = data.list.length; // data æˆ– list å¯èƒ½æœªå®šä¹‰

// âœ… æ¨èå†™æ³•ï¼šä½¿ç”¨å¯é€‰é“¾å’Œé»˜è®¤å€¼
const len = data?.list?.length ?? 0;
```

### JSON.parse å®‰å…¨å¤„ç†

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šè§£æ null ä¼šæŠ›å¼‚å¸¸
const jsonStr = null;
const obj = JSON.parse(jsonStr);

// âœ… æ¨èå†™æ³•ï¼šå…ˆåˆ¤æ–­ç±»å‹å’Œç©ºå€¼
const obj = typeof jsonStr === 'string' && jsonStr ? JSON.parse(jsonStr) : {};
```

### NaN åˆ¤å®šä¸å¤„ç†

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šNaN å‚ä¸è®¡ç®—å¯¼è‡´ç»“æœå¼‚å¸¸
let val = Number('abc');
let result = val + 10; // NaN

// âœ… æ¨èå†™æ³•ï¼šåˆ¤æ–­æ˜¯å¦ NaNï¼Œä½¿ç”¨é»˜è®¤å€¼
let val = Number('abc');
let safeVal = Number.isNaN(val) ? 0 : val;
let result = safeVal + 10;
```

### å‡½æ•°å‚æ•°é»˜è®¤å€¼

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæœªä¼ å‚æ•°æŠ¥é”™
function greet(name) {
  console.log('Hello ' + name.toUpperCase());
}

// âœ… æ¨èå†™æ³•ï¼šå‚æ•°é»˜è®¤å€¼
function greet(name = '') {
  console.log('Hello ' + name.toUpperCase());
}
```

### å®‰å…¨éå†æ•°ç»„

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šdataList æœªå®šä¹‰æŠ¥é”™
dataList.forEach(item => console.log(item.name));

// âœ… æ¨èå†™æ³•ï¼šåˆ¤æ–­æ•°ç»„æœ‰æ•ˆæ€§
if (Array.isArray(dataList) && dataList.length) {
  dataList.forEach(item => console.log(item.name));
}
```

---

## âš ï¸ é˜²æ­¢å‰ç«¯å¸¸è§é˜»æ–­æ€§é”™è¯¯åŠè§„èŒƒç¤ºèŒƒ

### 1. é˜²æ­¢æœªæ•è·çš„ Promise å¼‚å¸¸

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¼‚æ­¥å‡½æ•°æ—  try/catchï¼Œå¼‚å¸¸æœªå¤„ç†
async function fetchData() {
  const res = await api.getData(); // å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œä¼šæŠ›å¼‚å¸¸å¯¼è‡´å´©æºƒ
  return res.data;
}

// âœ… æ¨èå†™æ³•ï¼šåŠ  try/catch æ•è·å¼‚å¸¸
async function fetchData() {
  try {
    const res = await api.getData();
    return res.data;
  } catch (e) {
    console.error('fetchData error:', e);
    return null;
  }
}
```

### 2. é˜²æ­¢äº‹ä»¶ç›‘å¬å™¨æ³„æ¼ï¼Œé¿å…å†…å­˜æ³„æ¼

```js
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šäº‹ä»¶ç›‘å¬æ²¡æœ‰è§£ç»‘
mounted() {
  window.addEventListener('resize', this.onResize);
}
// ç»„ä»¶é”€æ¯æ—¶æœªè§£ç»‘ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼å’Œå¼‚å¸¸

// âœ… æ¨èå†™æ³•ï¼šç»„ä»¶é”€æ¯æ—¶è§£ç»‘
mounted() {
  window.addEventListener('resize', this.onResize);
},
beforeDestroy() {
  window.removeEventListener('resize', this.onResize);
}
```

### 3. Vue / React ä¸­è¡¨å•ç»‘å®šé¿å… undefined/null

```vue
<!-- Vue ç¤ºä¾‹ -->
<!-- âŒ é”™è¯¯ç¤ºä¾‹ï¼šv-model ç»‘å®šæœªå®šä¹‰å˜é‡ -->
<input v-model="form.name" />

<script>
export default {
  data() {
    return {
      form: {}
    }
  }
}
</script>

<!-- âœ… æ¨èå†™æ³•ï¼šåˆå§‹åŒ–æ‰€æœ‰è¡¨å•å­—æ®µ -->
<script>
export default {
  data() {
    return {
      form: {
        name: ''
      }
    }
  }
}
</script>
```

```jsx
// React ç¤ºä¾‹
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå—æ§ç»„ä»¶ value ç»‘å®š undefined
<input value={form.name} onChange={handleChange} />

// âœ… æ¨èå†™æ³•ï¼šç¡®ä¿åˆå§‹å€¼ä¸æ˜¯ undefined
const [form, setForm] = React.useState({ name: '' });
```

### 4. é˜²æ­¢æ¨¡æ¿ä¸­è¡¨è¾¾å¼å¼‚å¸¸å¯¼è‡´æ¸²æŸ“å¤±è´¥

```vue
<!-- âŒ é”™è¯¯ç¤ºä¾‹ï¼šè¡¨è¾¾å¼ä¸­ç›´æ¥è®¿é—®æœªå®šä¹‰å±æ€§ -->
<div>{{ user.profile.name }}</div> <!-- user æˆ– profile å¯èƒ½æœªå®šä¹‰ï¼Œå¯¼è‡´æ¸²æŸ“æŠ¥é”™ -->

<!-- âœ… æ¨èå†™æ³•ï¼šä½¿ç”¨å¯é€‰é“¾ -->
<div>{{ user?.profile?.name ?? '' }}</div>
```

### 5. æ•°æ®å¼‚æ­¥åŠ è½½æ—¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œé¿å…ç©ºç™½é¡µé¢

```vue
<template>
  <div v-if="loading">Loading...</div>
  <div v-else-if="error">{{ errorMessage }}</div>
  <div v-else>
    <!-- æ­£å¸¸æ¸²æŸ“å†…å®¹ -->
  </div>
</template>

<script>
export default {
  data() {
    return {
      loading: false,
      error: false,
      errorMessage: '',
      data: null,
    };
  },
  async mounted() {
    this.loading = true;
    try {
      this.data = await fetchData();
    } catch (e) {
      this.error = true;
      this.errorMessage = 'Failed to load data';
    } finally {
      this.loading = false;
    }
  }
};
</script>
```

---

## ğŸ’¡ æ³¨é‡Šè§„èŒƒç¤ºä¾‹

```js
// è®¡ç®—ç”¨æˆ·å¹´é¾„ï¼Œä¼ å…¥å‡ºç”Ÿå¹´ä»½ï¼Œè¿”å›æ•´æ•°
function calculateAge(birthYear) {
  // å½“å‰å¹´ä»½
  const currentYear = new Date().getFullYear();
  return currentYear - birthYear;
}
## âš ï¸ é˜²å¾¡å¼ç¼–ç¨‹ï¼šæ£€æŸ¥ undefined/null/NaN

```js
function safeAdd(a, b) {
  if (typeof a !== 'number' || typeof b !== 'number') return 0;
  return a + b;
}

function safeAccess(obj, path, defaultValue = '') {
  return path.split('.').reduce((o, k) => (o && o[k] !== undefined ? o[k] : defaultValue), obj);
}
```

---

## âœ… ä¿è¯ä»£ç è´¨é‡çš„è§„èŒƒ

### 1. å‘½åè§„èŒƒ

- é©¼å³°å‘½åï¼ˆcamelCaseï¼‰
- å¸¸é‡å¤§å†™ä¸‹åˆ’çº¿ï¼ˆUPPER_SNAKE_CASEï¼‰
- æ–‡ä»¶å°å†™çŸ­æ¨ªçº¿ï¼ˆkebab-caseï¼‰

```js
const userName = 'å¼ ä¸‰';
const MAX_COUNT = 100;

function fetchData() {}
```

### 2. å•ä¸€èŒè´£å‡½æ•°

```js
function validateData(data) {}
function saveToDB(data) {}
function sendNotification(data) {}
```

### 3. é¿å…é‡å¤ä»£ç 

- å…¬å…±é€»è¾‘æŠ½ç¦»å‡½æ•°æˆ–å·¥å…·æ¨¡å—

### 4. æ³¨é‡Šè§„èŒƒ

- ä¸­æ–‡æ³¨é‡Š
- æ³¨é‡Šè§£é‡Šå­—æ®µå«ä¹‰ã€é€»è¾‘æˆ–çº¦æŸæ¡ä»¶

```js
// è®¡ç®—å¹´é¾„ï¼Œä¼ å…¥å‡ºç”Ÿå¹´ä»½
function calculateAge(birthYear) {
  const currentYear = new Date().getFullYear();
  return currentYear - birthYear;
}
```

### 5. ä»£ç é£æ ¼

- æ¯è¡Œ â‰¤ 120 å­—ç¬¦
- ä½¿ç”¨ const/letï¼Œé¿å… var
- æ‰€æœ‰ä»£ç å—ä½¿ç”¨å¤§æ‹¬å·

### 6. ç¦ç”¨é­”æ³•æ•°å­—å’Œå­—ç¬¦ä¸²
performance-bar
```js
// âŒ
if (status === 3) {}

// âœ…
const STATUS_SUCCESS = 3;
if (status === STATUS_SUCCESS) {}
```
### 7. ä»»ä½•ä¿®æ”¹æ–°å¢æ“ä½œéƒ½è¦è€ƒè™‘æ€§èƒ½
### 8. æ¶‰åŠåˆ°ç›¸å…³å˜åŒ–çš„æ—¶å€™è¦åŠæ—¶æ›´æ–°æ–‡æ¡£å’Œæµ‹è¯•æ•°æ®
### 9. å³æ—¶é€šè¿‡MCPæŸ¥çœ‹æµè§ˆå™¨æ—¥å¿—
### 10.å¦‚æœä¸æ¶‰åŠåˆ°webpack.config,babelrcç­‰é…ç½®æ–‡ä»¶çš„ä¿®æ”¹åˆ™ä¸éœ€è¦é¢‘ç¹é‡å¯
### 11.å¦‚æœnpmæœ‰ç°æˆç»„ä»¶å°½å¯èƒ½å»ä½¿ç”¨ï¼Œä¸å¿…å®Œå…¨è‡ªå·±å¼€å‘
### 12.æ— æ•ˆä»£ç è¦å³æ—¶åˆ é™¤ï¼Œé¿å…ä»£ç å†—ä½™
### 13.ä¿®æ”¹æ–°å¢ä»£ç å‰å…ˆæŸ¥æ‰¾å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰å·²å­˜åœ¨çš„æˆ–æ³¨é‡Šæ‰çš„ä»£ç 
### 14.æ³¨æ„å®šä¹‰çš„å­—æ®µåœ¨dataæˆ–è®¡ç®—å±æ€§ç­‰ä¸è¦å’Œvuex storeé‡Œçš„stateï¼Œgetterç­‰é‡å
### 15.ä»»ä½•æƒ…å†µä¸‹å¼€å§‹æ—¶é—´ä¸èƒ½å¤§äºç»“æŸæ—¶é—´è¿™ä¸ªå¿…é¡»éªŒè¯
### 16.æ—¢å®šæ•°å­—ç±»å‹/æ•°ç»„/æ—¥æœŸç­‰ï¼Œæ•°æ®ç±»å‹å¿…é¡»åŠ æ ¡éªŒ
### 17.å•é¡µé¢ç”Ÿæˆä»£ç ä¸è¦è¶…è¿‡1000è¡Œ
### 18.å·²å…¨å±€å¼•å…¥çš„ç»„ä»¶ï¼Œjsä¸ç”¨é‡å¤å¼•å…¥

---
